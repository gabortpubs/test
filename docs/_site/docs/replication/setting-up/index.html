<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.12.0 by Michael Rose
  Copyright 2013-2018 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Setting up geo-replication - IBM Event Streams</title>
<meta name="description" content="Set up geo-replication for your clusters.">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="IBM Event Streams">
<meta property="og:title" content="Setting up geo-replication">
<meta property="og:url" content="http://localhost:4000/mhub/qp-docs/docs/replication/setting-up/">


  <meta property="og:description" content="Set up geo-replication for your clusters.">







  <meta property="article:published_time" content="2018-09-09T10:14:16-04:00">



  <meta property="article:modified_time" content="2018-07-19T11:31:38-04:00">



  

  


<link rel="canonical" href="http://localhost:4000/mhub/qp-docs/docs/replication/setting-up/">







  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "IBM",
      "url": "http://localhost:4000/mhub/qp-docs",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/mhub/qp-docs/feed.xml" type="application/atom+xml" rel="alternate" title="IBM Event Streams Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/mhub/qp-docs/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="/mhub/qp-docs/">IBM Event Streams</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/mhub/qp-docs/docs/about/overview/" >Documentation</a>
            </li><li class="masthead__menu-item">
              <a href="/mhub/qp-docs/support/" >Support</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle Menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          
          

          <a href="/mhub/qp-docs/docs/about/overview/"><span class="nav__sub-title">About</span></a>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/about/overview/" class="">Introduction</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/about/key-concepts/" class="">Key concepts</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/about/producing-messages/" class="">Producing messages</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/about/consuming-messages/" class="">Consuming messages</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/about/partition-leadership/" class="">Partition leadership</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/about/accessibility/" class="">Accessibility</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/about/notices/" class="">Notices</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Installing</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/installing/prerequisites/" class="">Pre-requisites</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/installing/planning/" class="">Planning for installation</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/installing/downloading/" class="">Downloading</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/installing/installing/" class="">Installing</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/installing/configuring/" class="">Configuring</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/installing/migrating/" class="">Migrating to IBM Event Streams</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/installing/post-installation/" class="">Post-installation tasks</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/installing/uninstalling/" class="">Uninstalling</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Getting started</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/getting-started/logging-in/" class="">Logging in</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/getting-started/generating-starter-app/" class="">Generating a starter application</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/getting-started/testing-loads/" class="">Creating and testing message loads</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Security</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/security/users/" class="">Setting up users</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/security/encrypting-data/" class="">Encrypting your data</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Geo-replication</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/replication/about/" class="">About geo-replication</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/replication/planning/" class="">Planning for geo-replication</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/replication/setting-up/" class="active">Setting up geo-replication</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/replication/health/" class="">Monitoring health of geo-replication</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Connecting to other systems</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/connecting/mq/" class="">Connecting to IBM MQ</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/connecting/mq-source-reference/" class="">Reference for IBM MQ source connector</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Administering</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/administering/deployment-health/" class="">Monitoring deployment health</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/administering/cluster-health/" class="">Monitoring Kafka cluster health</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/administering/modifying-configs/" class="">Modifying configuration settings</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/administering/scaling/" class="">Scaling</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/administering/updating-dynamically/" class="">Updating dynamically</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          
          

          <a href="/mhub/qp-docs/docs/troubleshooting/intro/"><span class="nav__sub-title">Troubleshooting</span></a>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/troubleshooting/ui-error-firefox/" class="">UI error on Firefox</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Setting up geo-replication">
    <meta itemprop="description" content="Set up geo-replication for your clusters.">
    <meta itemprop="datePublished" content="September 09, 2018">
    <meta itemprop="dateModified" content="July 19, 2018">

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Setting up geo-replication
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On This Page</h4></header>
              <ul class="toc__menu">
  <li><a href="#defining-destination-clusters">Defining destination clusters</a>
    <ul>
      <li><a href="#using-the-ui">Using the UI</a></li>
      <li><a href="#using-the-cli">Using the CLI</a></li>
    </ul>
  </li>
  <li><a href="#specifying-what-and-where-to-replicate">Specifying what and where to replicate</a>
    <ul>
      <li><a href="#using-the-ui-1">Using the UI</a></li>
      <li><a href="#using-the-cli-1">Using the CLI</a></li>
    </ul>
  </li>
  <li><a href="#switching-clusters">Switching clusters</a></li>
</ul>
            </nav>
          </aside>
        
        <p>You can set up geo-replication using the IBM Event Streams UI or CLI. You can then switch your applications to use another cluster when needed.</p>

<p>Ensure you <a href="../planning/">plan for geo-replication</a> before setting it up.</p>

<h2 id="defining-destination-clusters">Defining destination clusters</h2>

<p>To be able to replicate topics, you must define destination clusters. The process involves logging in to your intended destination cluster and copying its connection details to the clipboard. You then log in to the origin cluster and use the connection details to point to the intended destination cluster and define it as a possible target for your replication.</p>

<h3 id="using-the-ui">Using the UI</h3>

<ol>
  <li>Log in to your destination IBM Event Streams cluster as an administrator.</li>
  <li>Click the <strong>Topics</strong> tab and then click <strong>Geo-replication</strong>.</li>
  <li>In the <strong>This cluster as a destination</strong> section, click <strong>Generate connection information</strong>.</li>
  <li>Click <strong>Copy connection information</strong> to copy the connection details to the clipboard. This information is what you need to specify the cluster as a destination for replication when you log in to your origin cluster.</li>
  <li>Log in to your origin IBM Event Streams cluster as an administrator.</li>
  <li>Click the <strong>Topics</strong> tab and then click <strong>Geo-replication</strong>.</li>
  <li>Click <strong>Add destination cluster</strong>.</li>
  <li>Paste the information you copied in step 4, and click <strong>Add destination</strong>. The cluster is added as a destination to where you can replicate topics to.</li>
</ol>

<h3 id="using-the-cli">Using the CLI</h3>

<ol>
  <li>Go to your destination cluster. Using the IBM Cloud Private CLI, log in to your cluster as an administrator:<br /> <code class="highlighter-rouge">cloudctl login -a https://&lt;master-ip&gt;:8443 -u &lt;username&gt; -p &lt;password&gt;</code></li>
  <li>Run the following command to start the IBM Event Streams CLI: <code class="highlighter-rouge">cloudctl es init</code> <br /> The result includes the <strong>Event Streams API endpoint</strong> value. Copy the displayed value to the clipboard.</li>
  <li>Go to your origin cluster. Using the IBM Cloud Private CLI, log in to your cluster as an administrator:<br /> <code class="highlighter-rouge">cloudctl login -a https://&lt;master-ip&gt;:8443 -u &lt;username&gt; -p &lt;password&gt;</code></li>
  <li>Run the following command to start the IBM Event Streams CLI: <code class="highlighter-rouge">cloudctl es init</code></li>
  <li>Run the following command to add the cluster as a destination to where you can replicate your topics to: <code class="highlighter-rouge">cloudctl es geo-replicator-create --rest-api-url &lt;endpoint-value-from-step-3&gt;</code></li>
</ol>

<h2 id="specifying-what-and-where-to-replicate">Specifying what and where to replicate</h2>

<p>To select the topics you want to replicate and set the destination cluster to replicate to, use the following steps.</p>

<h3 id="using-the-ui-1">Using the UI</h3>

<ol>
  <li>Log in to your origin IBM Event Streams cluster as an administrator.</li>
  <li>Click the <strong>Topics</strong> tab and then click <strong>Geo-replication</strong>.</li>
  <li>Choose a destination cluster to replicate to by selecting the name of the cluster from the list on the right.</li>
  <li>Choose the topics you want to replicate by selecting the check box next each, and click <strong>Geo-replicate to selected destination</strong>. You can also drag topics to add them to be replicated.</li>
  <li>Optional: Select whether to add a prefix to the name of the new replicated topic that is created on the destination cluster. Set <strong>No prefix added to destination topics</strong> or set <strong>Cluster name added as topic prefix</strong>.</li>
  <li>Optional: Select whether you want to include message history in the replication, or if you only want to copy the message data from the time of setting up replication. Set <strong>Include message history in replication</strong> or set <strong>Don’t include message history in replication</strong>.</li>
  <li>Click <strong>Create</strong> to create geo-replicators for the selected topics on the chosen destination cluster. Geo-replication starts automatically when the geo-replicators for the selected topics are set up successfully.</li>
</ol>

<h3 id="using-the-cli-1">Using the CLI</h3>

<p>To set up replication by using the CLI:</p>

<ol>
  <li>Go to your origin cluster. Using the IBM Cloud Private CLI, log in to your cluster as an administrator:<br /> <code class="highlighter-rouge">cloudctl login -a https://&lt;master-ip&gt;:8443 -u &lt;username&gt; -p &lt;password&gt;</code></li>
  <li>Run the following command to start the IBM Event Streams CLI: <code class="highlighter-rouge">cloudctl es init</code></li>
  <li>Choose a destination cluster to replicate to by listing all available destination clusters, making the ID of the clusters available to select and copy: <code class="highlighter-rouge">cloudctl es geo-clusters</code></li>
  <li>Open a new terminal window. Choose the topics you want to replicate by listing your topics, making the names of the topics available to select and copy: <code class="highlighter-rouge">cloudctl es topics</code></li>
  <li>Open a new terminal window. Specify the destination cluster to replicate to, and set the topics you want to replicate. Use the required destination cluster ID and topic names retrieved in the previous steps. The command creates one replicator for each topic, so list each topic you want to replicate using a comma-separated list: <br /> <code class="highlighter-rouge">cloudctl es geo-replicator-create --destination &lt;cluster-ID-from-step-3&gt; --topics &lt;comma-separated-list-of-topic-names-from-step-4&gt;</code> <br /> Geo-replication starts automatically when the geo-replicators for the selected topics are set up successfully.</li>
  <li>Optional: You can specify to add a prefix to the name of the new replicated topic that is created on the destination cluster by using the <code class="highlighter-rouge">--prefix &lt;prefix-name&gt;</code> option.</li>
  <li>Optional: Select whether you want to include message history in the replication, or if you only want to copy the message data from the time of setting up replication. Set one of the following:
    <ul>
      <li>Use the <code class="highlighter-rouge">--from earliest</code> option to include available message history in geo-replication. This means all available message data for the topic is copied.</li>
      <li>Use the <code class="highlighter-rouge">--from latest</code> option to exclude available message history. This means that only message data from the time of setting up replication is copied.</li>
    </ul>

    <p>For example, to use all options to create the geo-replicators: <br /> <code class="highlighter-rouge">cloudctl es geo-replicator-create --destination &lt;cluster-ID-from-step-3&gt; --topics &lt;comma-separated-list-of-topic-names-from-step-4&gt; --from &lt;earliest or latest&gt; --prefix &lt;topic-name-prefix&gt;</code> <br /> For example: <br /> <code class="highlighter-rouge">cloudctl es geo-replicator-create --destination DestinationClusterId --topics MyTopicName1,MyTopicName2 --from latest --prefix GeoReplica-</code></p>
  </li>
</ol>

<p>When your geo-replication is set up, you can <a href="../health">monitor and manage it</a>.</p>

<h2 id="switching-clusters">Switching clusters</h2>

<p>When one of your/primary ? IBM Event Stream cluster experiences problems and goes down, you are notified that your workload is switching to a backup/another ? cluster. To switch your applications over to use the backup/another cluster, follow these steps.</p>

<p><strong>DRAFT COMMENT:</strong> <em>CLI command will be along the lines of:</em> <code class="highlighter-rouge">cloudctl es group-reset</code> <br /> <em>Will not be available to switch from the UI</em></p>

<p><strong>DRAFT COMMENT/To-do:</strong> <em>Add info about how to do this. Also include some notes on strategies</em>
<em>Not easy, as we make the replication work, but you do have to take manual steps to switch over to use replicated topics on another cluster. This means changes to your applications - the user will need to do this and depends on their setup and strategy:</em> <br />
<em>For example, users might be running a set of applicaitons that are the backup for primary applications. The setup might mean they have a mechanism for taking over from the primary location. OR You might need to change your application code to use a different cluster when needed. Talk to Andrew.</em></p>

        
      </section>

      <footer class="page__meta">
        
        


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2018-07-19">July 19, 2018</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="/mhub/qp-docs/docs/replication/planning/" class="pagination--pager" title="Planning for geo-replication
">Previous</a>
    
    
      <a href="/mhub/qp-docs/docs/replication/health/" class="pagination--pager" title="Monitoring and managing geo-replication
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>
      <!-- <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <div align="center" style="margin: 1em 0;">
        <ins class="adsbygoogle"
             style="display:block; border-bottom: initial;"
             data-ad-client="ca-pub-7328585512091257"
             data-ad-slot="3049671934"
             data-ad-format="auto"></ins>
        </div>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script> -->
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><input type="text" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
    <div id="results" class="results"></div></div>
      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        
<div class="page__footer-copyright"><a href="https://www.ibm.com/privacy/us/en/" rel="nofollow" target="_blank">Privacy Policy</a>  &nbsp;© Copyright IBM Corp. 2018</br>
  Released under the <a href="https://www.apache.org/licenses/LICENSE-2.0" rel="nofollow" target="_blank">Apache License v2.0</a></div>

      </footer>
    </div>

    
  <script src="/mhub/qp-docs/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.2.0/js/all.js"></script>




<script src="/mhub/qp-docs/assets/js/lunr/lunr.min.js"></script>
<script src="/mhub/qp-docs/assets/js/lunr/lunr-store.js"></script>
<script src="/mhub/qp-docs/assets/js/lunr/lunr-en.js"></script>





  </body>
</html>
