<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.12.0 by Michael Rose
  Copyright 2013-2018 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE.txt
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Consuming messages - IBM Event Streams</title>
<meta name="description" content="A consumer is an application that consumes streams of messages from Kafka topics.">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="IBM Event Streams">
<meta property="og:title" content="Consuming messages">
<meta property="og:url" content="http://localhost:4000/mhub/qp-docs/docs/about/consuming-messages/">


  <meta property="og:description" content="A consumer is an application that consumes streams of messages from Kafka topics.">







  <meta property="article:published_time" content="2018-09-09T10:14:16-04:00">



  <meta property="article:modified_time" content="2018-07-19T11:31:38-04:00">



  

  


<link rel="canonical" href="http://localhost:4000/mhub/qp-docs/docs/about/consuming-messages/">







  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Person",
      "name": "IBM",
      "url": "http://localhost:4000/mhub/qp-docs",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/mhub/qp-docs/feed.xml" type="application/atom+xml" rel="alternate" title="IBM Event Streams Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/mhub/qp-docs/assets/css/main.css">

<!--[if lte IE 9]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <a class="site-title" href="/mhub/qp-docs/">IBM Event Streams</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/mhub/qp-docs/docs/about/overview/" >Documentation</a>
            </li><li class="masthead__menu-item">
              <a href="/mhub/qp-docs/support/" >Support</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle Menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          
          

          <a href="/mhub/qp-docs/docs/about/overview/"><span class="nav__sub-title">About</span></a>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/about/overview/" class="">Introduction</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/about/key-concepts/" class="">Key concepts</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/about/producing-messages/" class="">Producing messages</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/about/consuming-messages/" class="active">Consuming messages</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/about/partition-leadership/" class="">Partition leadership</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/about/accessibility/" class="">Accessibility</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/about/notices/" class="">Notices</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Installing</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/installing/prerequisites/" class="">Pre-requisites</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/installing/planning/" class="">Planning for installation</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/installing/downloading/" class="">Downloading</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/installing/installing/" class="">Installing</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/installing/configuring/" class="">Configuring</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/installing/migrating/" class="">Migrating to IBM Event Streams</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/installing/post-installation/" class="">Post-installation tasks</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/installing/uninstalling/" class="">Uninstalling</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Getting started</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/getting-started/logging-in/" class="">Logging in</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/getting-started/generating-starter-app/" class="">Generating a starter application</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/getting-started/testing-loads/" class="">Creating and testing message loads</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Security</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/security/users/" class="">Setting up users</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/security/encrypting-data/" class="">Encrypting your data</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Geo-replication</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/replication/about/" class="">About geo-replication</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/replication/planning/" class="">Planning for geo-replication</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/replication/setting-up/" class="">Setting up geo-replication</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/replication/health/" class="">Monitoring health of geo-replication</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Connecting to other systems</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/connecting/mq/" class="">Connecting to IBM MQ</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/connecting/mq-source-reference/" class="">Reference for IBM MQ source connector</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          <span class="nav__sub-title">Administering</span>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/administering/deployment-health/" class="">Monitoring deployment health</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/administering/cluster-health/" class="">Monitoring Kafka cluster health</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/administering/modifying-configs/" class="">Modifying configuration settings</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/administering/scaling/" class="">Scaling</a></li>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/administering/updating-dynamically/" class="">Updating dynamically</a></li>
          
        </ul>
        
      </li>
    
      <li>
        
          
          

          <a href="/mhub/qp-docs/docs/troubleshooting/intro/"><span class="nav__sub-title">Troubleshooting</span></a>
        

        
        <ul>
          
            
            

            
            

            <li><a href="/mhub/qp-docs/docs/troubleshooting/ui-error-firefox/" class="">UI error on Firefox</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>
    
  
  </div>


  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Consuming messages">
    <meta itemprop="description" content="A consumer is an application that consumes streams of messages from Kafka topics.">
    <meta itemprop="datePublished" content="September 09, 2018">
    <meta itemprop="dateModified" content="July 19, 2018">

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Consuming messages
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right ">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On This Page</h4></header>
              <ul class="toc__menu">
  <li><a href="#configuring-consumer-properties">Configuring consumer properties</a></li>
  <li><a href="#consumer-groups">Consumer groups</a></li>
  <li><a href="#consumer-liveness">Consumer liveness</a>
    <ul>
      <li><a href="#managing-offsets">Managing offsets</a></li>
      <li><a href="#what-if-there-is-no-existing-committed-offset">What if there is no existing committed offset?</a></li>
      <li><a href="#committing-offsets-automatically">Committing offsets automatically</a></li>
      <li><a href="#committing-offsets-manually">Committing offsets manually</a></li>
      <li><a href="#consumer-lag">Consumer lag</a></li>
    </ul>
  </li>
  <li><a href="#controlling-the-speed-of-message-consumption">Controlling the speed of message consumption</a></li>
  <li><a href="#handling-consumer-rebalancing">Handling consumer rebalancing</a></li>
  <li><a href="#exception-handling">Exception handling</a></li>
</ul>
            </nav>
          </aside>
        
        <p>A consumer is an application that consumes streams of messages from Kafka topics. A consumer can subscribe to one or more topics or partitions. This information focuses on the Java programming interface that is part of the Apache Kafka project. The concepts apply to other languages too, but the names are sometimes a little different.</p>

<p>When a consumer connects to Kafka, it makes an initial bootstrap connection. This connection can be to any of the servers in the cluster. The consumer requests the partition and leadership information about the topic that it wants to consume from. Then the consumer establishes another connection to the partition leader and can begin to consume messages. These actions happen automatically internally when your consumer connects to the Kafka cluster.</p>

<p>A consumer is normally a long-running application. A consumer requests messages from Kafka by calling <code class="highlighter-rouge">Consumer.poll(...)</code> regularly. The consumer calls <code class="highlighter-rouge">poll()</code>, receives a batch of messages,processes them promptly, and then calls <code class="highlighter-rouge">poll()</code> again.</p>

<p>When a consumer processes a message, the message is not removed from its topic. Instead, consumers can choose from several ways of letting Kafka know which messages have been processed. This process is known as committing the offset.</p>

<p>In the programming interfaces, a message is actually called a record. For example, the Java class org.apache.kafka.clients.consumer.ConsumerRecord is used to represent a message for the consumer API. The terms <em>record</em> and <em>message</em> can be used interchangeably, but essentially a record is used to represent a message.</p>

<p>You might find it useful to read this information in conjunction with <a href="../producing-messages">producing messages</a> in IBM Event Streams.</p>

<h2 id="configuring-consumer-properties">Configuring consumer properties</h2>

<p>There are many configuration settings for the consumer, which control aspects of its behavior. The following table lists the most important ones:</p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Valid values</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>key.deserializer</td>
      <td>The class used to deserialize keys.</td>
      <td>Java class that implements Deserializer interface, such as org.apache.kafka.common.serialization.StringDeserializer</td>
      <td>No default – you must specify a value</td>
    </tr>
    <tr>
      <td>value.deserializer</td>
      <td>The class used to deserialize values.</td>
      <td>Java class that implements Deserializer interface, such as org.apache.kafka.common.serialization.StringDeserializer</td>
      <td>No default – you must specify a value</td>
    </tr>
    <tr>
      <td>group.id</td>
      <td>An identifier for the consumer group that the consumer belongs to.</td>
      <td>string</td>
      <td>No default</td>
    </tr>
    <tr>
      <td>auto.offset.reset</td>
      <td>The behavior when the consumer has no initial offset or the current offset is no longer available in the cluster.</td>
      <td>latest, earliest, none</td>
      <td>latest</td>
    </tr>
    <tr>
      <td>enable.auto.commit</td>
      <td>Determines whether to commit the consumer’s offset automatically in the background.</td>
      <td>true, false</td>
      <td>true</td>
    </tr>
    <tr>
      <td>auto.commit.interval.ms</td>
      <td>The number of milliseconds between periodic commits of offsets.</td>
      <td>0,…</td>
      <td>5000 (5 seconds)</td>
    </tr>
    <tr>
      <td>max.poll.records</td>
      <td>The maximum number of records returned in a call to poll()</td>
      <td>1,…</td>
      <td>500</td>
    </tr>
    <tr>
      <td>session.timeout.ms</td>
      <td>The number of milliseconds within which a consumer heartbeat must be received to maintain a consumer’s membership of a consumer group.</td>
      <td>6000-300000</td>
      <td>10000 (10 seconds)</td>
    </tr>
    <tr>
      <td>max.poll.interval.ms</td>
      <td>The maximum time interval between polls before the consumer leaves the group.</td>
      <td>1,…</td>
      <td>300000 (5 minutes)</td>
    </tr>
  </tbody>
</table>

<p>Many more configuration settings are available, but ensure you read the <a href="http://kafka.apache.org/documentation/">Apache Kafka documentation</a> thoroughly before experimenting with them.</p>

<h2 id="consumer-groups">Consumer groups</h2>

<p>A <em>consumer group</em> is a group of consumers cooperating to consume messages from one or more topics. The consumers in a group all use the same value for the <code class="highlighter-rouge">group.id</code> configuration. If you need more than one consumer to handle your workload, you can run multiple consumers in the same consumer group. Even if you only need one consumer, it's usual to also specify a value for <code class="highlighter-rouge">group.id</code>.</p>

<p>Each consumer group has a server in the cluster called the <em>coordinator</em> responsible for assigning partitions to the consumers in the group. This responsibility is spread across the servers in the cluster to even the load. The assignment of partitions to consumers canchange at every group rebalance.</p>

<p>When a consumer joins a consumer group, it discovers the coordinator for the group. The consumer then tells the coordinator that it wants to join the group and the coordinator starts a rebalance of the partitions across the group including the new member.</p>

<p>When one of the following changes take place in a consumer group, the group rebalances by shifting the assignment of partitions to the group members to accommodate the change:</p>

<ul>
  <li>a consumer joins the group</li>
  <li>a consumer leaves the group</li>
  <li>a consumer is considered as no longer live by the coordinator</li>
  <li>new partitions are added to an existing topic</li>
</ul>

<p>For each consumer group, Kafka remembers the committed offset for each partition being consumed.</p>

<p>If you have a consumer group that has rebalanced, be aware that any consumer that has left the group will have its commits rejected until it rejoins the group. In this case, the consumer needs to rejoin the group, where it might be assigned a different partition to the one it was previously consuming from.</p>

<h2 id="consumer-liveness">Consumer liveness</h2>

<p>Kafka automatically detects failed consumers so that it can reassign partitions to working consumers. It uses two mechanisms to achieve this: polling and heartbeating.</p>

<p>If the batch of messages returned from <code class="highlighter-rouge">Consumer.poll(...)</code> is large or the processing is time-consuming, the delay before calling <code class="highlighter-rouge">poll()</code> again can be significant or unpredictable. In some cases, it's necessary to configure a long
maximum polling interval so that consumers do not get removed from their groups just because message processing is taking a while. If this were the only mechanism, it would mean that the time taken to detect a failed consumer would also be long.</p>

<p>To make consumer liveness easier to handle, background heartbeating was added in Kafka 0.10.1. The group coordinator expects group members to send it regular heartbeats to indicate that they remain active. A background heartbeat thread runs in the consumer sending regular heartbeats to the coordinator. If the coordinator does not receive a heartbeat from a group member within the <em>session timeout</em>, the coordinator removes the member from the group and starts a rebalance of the group. The session timeout can be much shorter than the maximum polling interval so that the time taken to detect a failed consumer can be short even if message processing takes a long time.</p>

<p>You can configure the maximum polling interval using the <code class="highlighter-rouge">max.poll.interval.ms</code> property and the session timeout using the <code class="highlighter-rouge">session.timeout.ms</code> property. You will typically not need to use these settings unless it takes more than 5 minutes to process a batch of messages.</p>

<h3 id="managing-offsets">Managing offsets</h3>

<p>For each consumer group, Kafka maintains the committed offset for each partition being consumed. When a consumer processes a message, it doesn't remove it from the partition. Instead, it just updates its current offset using a process called committing the offset.</p>

<p>By default, IBM Event Streams retains committed offset information for 7 days.</p>

<h3 id="what-if-there-is-no-existing-committed-offset">What if there is no existing committed offset?</h3>

<p>When a consumer starts and is assigned a partition to consume, it will start at its group's committed offset. If there is no existing committed offset, the consumer can choose whether to start with the earliest or latest available message based on the setting of the <code class="highlighter-rouge">auto.offset.reset</code> property as follows:</p>

<ul>
  <li><code class="highlighter-rouge">latest</code> (the default): Your consumer receives and consumes only messages that arrive after subscribing. Your consumer has no knowledge of messages that were sent before it subscribed, therefore you should not expect that all messages will be consumed from a topic.</li>
  <li><code class="highlighter-rouge">earliest</code>: Your consumer consumes all messages from the beginning because it is aware of all messages that have been sent.</li>
</ul>

<p>If a consumer fails after processing a message but before committing its offset, the committed offset information will not reflect the processing of the message. This means that the message will be processed again by the next consumer in that group to be assigned the partition.</p>

<p>When committed offsets are saved in Kafka and the consumers are restarted, consumers resume from the point they last stopped at. When there is a committed offset, the <code class="highlighter-rouge">auto.offset.reset</code> property is not used.</p>

<h3 id="committing-offsets-automatically">Committing offsets automatically</h3>

<p>The easiest way to commit offsets is to let the Kafka consumer do it automatically. This is simple but it does give less control than committing manually. By default, a consumer automatically commits offsets every 5 seconds. This default commit happens every 5 seconds, regardless of the progress the consumer is making towards processing the messages. In addition, when the consumer calls <code class="highlighter-rouge">poll()</code>, this also causes the latest offset returned from the previous call to <code class="highlighter-rouge">poll()</code> to be committed (because it's probably been processed).</p>

<p>If the committed offset overtakes the processing of the messages and there is a consumer failure, it's possible that some messages might not be processed. This is because processing restarts at the committed offset, which is later than the last message to be processed before the failure. For this reason, if reliability is more important than simplicity, it's usually best to commit offsets manually.</p>

<h3 id="committing-offsets-manually">Committing offsets manually</h3>

<p>If <code class="highlighter-rouge">enable.auto.commit</code> is set to <code class="highlighter-rouge">false</code>, the consumer commits its offsets manually. It can do this either synchronously or asynchronously. A common pattern is to commit the offset of the latest processed message based on a periodic timer. This pattern means that every message is processed at least once, but the committed offset never overtakes the progress of messages that are actively being processed. The frequency of the periodic timer controls the number of messages that can be reprocessed following a consumer failure. Messages are retrieved again from the last saved committed offset when the application restarts or when the group rebalances.</p>

<p>The committed offset is the offset of the messages from which processing is resumed. This is usually the offset of the most recently processed message <em>plus one</em>.</p>

<h3 id="consumer-lag">Consumer lag</h3>

<p>The consumer lag for a partition is the difference between the offset of the most recently published message and the consumer's committed offset. Although it's usual to have natural variations in the produce and consume rates, the consume rate should not be slower than the produce rate for an extended period.</p>

<p>If you observe that a consumer is processing messages successfully but occasionally appears to jump over a group of messages, it could be a sign that the consumer is not able to keep up. For topics that are not using log compaction, the amount of log space is managed by periodically deleting old log segments. If a consumer has fallen so far behind that it is consuming messages in a log segment that is deleted, it will suddenly jump forwards to the start of the next log segment. If it is important that the consumer processes all of the messages, this behavior indicates message loss from the point of view of this consumer.</p>

<p>You can use the <code class="highlighter-rouge">kafka-consumer-groups</code> tool to see the consumer lag. You can also use the consumer API and the consumer metrics for the same purpose.</p>

<h2 id="controlling-the-speed-of-message-consumption">Controlling the speed of message consumption</h2>

<p>If you have problems with message handling caused by message flooding, you can set a consumer option to control the speed of message consumption. Use <code class="highlighter-rouge">fetch.max.bytes</code> and <code class="highlighter-rouge">max.poll.records</code> to control how much data a call to <code class="highlighter-rouge">poll()</code> can return.</p>

<h2 id="handling-consumer-rebalancing">Handling consumer rebalancing</h2>

<p>When consumers are added to or removed from a group, a group rebalance takes place and consumers are not able to consume messages. This results in all the consumers in a consumer group being unavailable for a short period.</p>

<p>You could use a ConsumerRebalanceListener to manually commit offsets (if you are not using auto-commit) when notified with the "on partitions revoked" callback, and to pause further processing until notified of the successful rebalance using the "on partition assigned" callback.</p>

<h2 id="exception-handling">Exception handling</h2>

<p>Any robust application that uses the Kafka client needs to handle exceptions for certain expected situations. In some cases, the exceptions are not thrown directly because some methods are asynchronous and deliver their results using a <code class="highlighter-rouge">Future</code> or a callback.</p>

<p>Here's a list of exceptions that you should handle in your code:</p>

<p><strong>[org.apache.kafka.common.errors.WakeupException]</strong> Thrown by <code class="highlighter-rouge">Consumer.poll(...)</code> as a result of <code class="highlighter-rouge">Consumer.wakeup()</code> being called. This is the standard way to interrupt the consumer's polling loop. The polling loop should exit and <code class="highlighter-rouge">Consumer.close()</code> should be called to disconnect cleanly.</p>

<p><strong>[org.apache.kafka.common.errors.NotLeaderForPartitionException]</strong> Thrown as a result of <code class="highlighter-rouge">Producer.send(...)</code> when the leadership for a partition changes. The client automatically refreshes its metadata to find the up-to-date leader information. Retry the operation, which should succeed with the updated metadata.</p>

<p><strong>[org.apache.kafka.common.errors.CommitFailedException]</strong> Thrown as a result of &lt;<code class="highlighter-rouge">Consumer.commitSync(...)</code> when an unrecoverable error occurs. In some cases, it is not possible simply to repeat the operation because the partition assignment might have changed and the consumer might no longer be able to commit its offsets. Because <code class="highlighter-rouge">Consumer.commitSync(...)</code> can be partially successful when used with multiple partitions in a single call, the error recovery can be simplified by using a separate <code class="highlighter-rouge">Consumer.commitSync(...)</code> call for eachpartition.</p>

<p><strong>[org.apache.kafka.common.errors.TimeoutException]</strong> Thrown by <code class="highlighter-rouge">Producer.send(...),  Consumer.listTopics()</code> if the metadata cannot be retrieved. The exception is also seen in the send callback (or the returned Future) when the requested acknowledgment does not come back within <code class="highlighter-rouge">request.timeout.ms</code>. The client can retry the operation, but the effect of a repeated operation depends on the specific operation. For example, if sending a message is retried, the message might be duplicated.</p>

<p>To learn more, see the following information:</p>

<ul>
  <li><a href="../producing-messages">Producing messages</a></li>
  <li><a href="../partition-leadership/">Partition leadership</a></li>
  <li><a href="http://kafka.apache.org/documentation.html">Apache Kafka documentation</a></li>
</ul>

        
      </section>

      <footer class="page__meta">
        
        


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2018-07-19">July 19, 2018</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="/mhub/qp-docs/docs/about/producing-messages/" class="pagination--pager" title="Producing messages
">Previous</a>
    
    
      <a href="/mhub/qp-docs/docs/about/partition-leadership/" class="pagination--pager" title="Partition leadership
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>
      <!-- <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <div align="center" style="margin: 1em 0;">
        <ins class="adsbygoogle"
             style="display:block; border-bottom: initial;"
             data-ad-client="ca-pub-7328585512091257"
             data-ad-slot="3049671934"
             data-ad-format="auto"></ins>
        </div>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
      </script> -->
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><input type="text" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
    <div id="results" class="results"></div></div>
      </div>
    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        
<div class="page__footer-copyright"><a href="https://www.ibm.com/privacy/us/en/" rel="nofollow" target="_blank">Privacy Policy</a>  &nbsp;© Copyright IBM Corp. 2018</br>
  Released under the <a href="https://www.apache.org/licenses/LICENSE-2.0" rel="nofollow" target="_blank">Apache License v2.0</a></div>

      </footer>
    </div>

    
  <script src="/mhub/qp-docs/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.2.0/js/all.js"></script>




<script src="/mhub/qp-docs/assets/js/lunr/lunr.min.js"></script>
<script src="/mhub/qp-docs/assets/js/lunr/lunr-store.js"></script>
<script src="/mhub/qp-docs/assets/js/lunr/lunr-en.js"></script>





  </body>
</html>
